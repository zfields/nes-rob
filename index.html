<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nintendo R.O.B. Control Library: NES R.O.B. Control Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nintendo R.O.B. Control Library
   &#160;<span id="projectnumber">v1.1.2</span>
   </div>
   <div id="projectbrief">Library to control the Nintendo Robotic Operating Buddy</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NES R.O.B. Control Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_readme"></a></p>
<p>This library allows an Arduino board to control the Nintendo Robotic Operating Buddy (R.O.B.). The standard hardware configuration needed to control R.O.B. requires the placement of an LED in front of the left eye. This library can be used to generate pulses with the LED, resulting in full control of R.O.B.</p>
<p><img src="nes-rob.png" alt="" class="inline" title="Depiction of R.O.B. from the Gyromite Manual"/></p>
<p>The <code><a class="el" href="classNesRob.html" title="Nintendo R.O.B. Control Library.">NesRob</a></code> library simplies the interaction with the NES R.O.B., by handling the precision timing and command processing necessary to control R.O.B. The end user can simply choose an LED pin, then supply any of R.O.B.'s available actions to invoke the specified behavior in R.O.B. This library operates on top of the Arduino API, and therefore should be available to any Arduino compatible device.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Usage</h1>
<p>You may simply download and install this library using the <b>Arduino Library Manager</b>:</p>
<p><img src="installing-nesrob.gif" alt="" class="inline" title="Installing with Arduino Library Manager"/></p>
<p>The source code is relatively straight-forward. Here is an example that will blink R.O.B.'s LED:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#include &quot;NesRob.h&quot;</div>
<div class="line"> </div>
<div class="line">NesRob rob(LED_BUILTIN);</div>
<div class="line"> </div>
<div class="line">void setup() {</div>
<div class="line">  // put your setup code here, to run once:</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">void loop() {</div>
<div class="line">  rob.sendCommand(NesRob::Command::LED_ENABLE);</div>
<div class="line">  ::delay(1000);  // wait for a second</div>
<div class="line">  rob.sendCommand(NesRob::Command::LED_DISABLE);</div>
<div class="line">  ::delay(1000);  // wait for a second</div>
<div class="line">}</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><em><b>NOTE:</b> This example is offered by the library as <code>Blink</code>.</em> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md1"></a>
Examples</h2>
<ul>
<li><a href="https://www.github.com/zfields/nes-rob/tree/main/examples/Blink/Blink.ino">Blink</a>: Validate your hardware configuration by flashing the LED on R.O.B.'s head.</li>
<li><a href="https://www.github.com/zfields/nes-rob/tree/main/examples/Stow/Stow.ino">Stow</a>: Put R.O.B. into the position required to fit in the original packaging.</li>
<li><a href="https://www.github.com/zfields/nes-rob/tree/main/examples/StowPseudoInterrupt/StowPseudoInterrupt.ino">StowPseudoInterrupt</a>: Use the LED as a pseudo-interrupt to put R.O.B. into the position required to fit in the original packaging.</li>
<li><a href="https://www.github.com/zfields/nes-rob/tree/main/examples/TestMotorArms/TestMotorArms.ino">TestMotorArms</a>: Test the left shoulder motor, which will cause R.O.B.'s arms to close and open.</li>
<li><a href="https://www.github.com/zfields/nes-rob/tree/main/examples/TestMotorShoulders/TestMotorShoulders.ino">TestMotorShoulders</a>: Test the right shoulder motor, which will cause R.O.B.'s shoulders to move down and up.</li>
<li><a href="https://www.github.com/zfields/nes-rob/tree/main/examples/TestMotorTorso/TestMotorTorso.ino">TestMotorTorso</a>: Test the base motor, which will cause R.O.B.'s torso to twist left and right.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
API Documentation</h1>
<p>The API documentation is generated using <a href="https://www.doxygen.nl/index.html">Doxygen</a> and is hosted with GitHub pages.</p>
<p><a href="https://zfields.github.io/nes-rob/classNesRob.html">Click here</a> to view the API documentation page.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Research</h1>
<p>The research for this project describes the protocol, as well as provides oscilloscope readings to describe the signal behavior captured in the library.</p>
<p><a href="https://github.com/zfields/nes-rob/tree/main/docs/research.md">Click here</a> to view the research page.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
BluesRob Project</h1>
<p>A project enabling R.O.B. to receive and respond to commands over the global cellular network!</p>
<p><a href="https://www.hackster.io/zachary_fields/cellular-r-o-b-with-blues-wireless-38ac41">Click here</a> to view the project page.</p>
<p><a href="https://github.com/zfields/BluesRob/blob/main/BluesRob.ino">Click here</a> for the application source code, and an example of usage with native interrupts.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Running Tests</h1>
<p>The tests are designed to be executed using Docker, and the environment required by the tests is defined in <code>.github/actions/run-tests-in-container/Dockerfile</code>. The following directions are provided to aid in executing the tests in a container.</p>
<ol type="1">
<li>From the <code>nes-rob</code> folder, build the container with the following command:</li>
</ol>
<div class="fragment"><div class="line">docker build .github/actions/run-tests-in-container/ --tag nes-rob-test</div>
</div><!-- fragment --><ol type="1">
<li>Execute the tests inside the container using the following command:</li>
</ol>
<div class="fragment"><div class="line">docker run --rm --volume $(pwd):/nes-rob/ --workdir /nes-rob/ nes-rob-test</div>
</div><!-- fragment --><ol type="1">
<li>Similar test results should print to your terminal for review.</li>
</ol>
<div class="fragment"><div class="line">==29== Memcheck, a memory error detector</div>
<div class="line">==29== Copyright (C) 2002-2017, and GNU GPL&#39;d, by Julian Seward et al.</div>
<div class="line">==29== Using Valgrind-3.16.1 and LibVEX; rerun with -h for copyright info</div>
<div class="line">==29== Command: ./nes_rob_tests</div>
<div class="line">==29==</div>
<div class="line">===============================================================================</div>
<div class="line">All tests passed (98 assertions in 88 test cases)</div>
<div class="line"> </div>
<div class="line">==29==</div>
<div class="line">==29== HEAP SUMMARY:</div>
<div class="line">==29==     in use at exit: 72,704 bytes in 1 blocks</div>
<div class="line">==29==   total heap usage: 18,118 allocs, 18,117 frees, 1,166,036 bytes allocated</div>
<div class="line">==29==</div>
<div class="line">==29== LEAK SUMMARY:</div>
<div class="line">==29==    definitely lost: 0 bytes in 0 blocks</div>
<div class="line">==29==    indirectly lost: 0 bytes in 0 blocks</div>
<div class="line">==29==      possibly lost: 0 bytes in 0 blocks</div>
<div class="line">==29==    still reachable: 72,704 bytes in 1 blocks</div>
<div class="line">==29==         suppressed: 0 bytes in 0 blocks</div>
<div class="line">==29== Rerun with --leak-check=full to see details of leaked memory</div>
<div class="line">==29==</div>
<div class="line">==29== For lists of detected and suppressed errors, rerun with: -s</div>
<div class="line">==29== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)</div>
<div class="line">------------------------------------------------------------------------------</div>
<div class="line">                           GCC Code Coverage Report</div>
<div class="line">Directory: ../src</div>
<div class="line">------------------------------------------------------------------------------</div>
<div class="line">File                                       Lines    Exec  Cover   Missing</div>
<div class="line">------------------------------------------------------------------------------</div>
<div class="line">signal_generator.cpp                          36      36   100%</div>
<div class="line">pulse_driver.hpp                               1       1   100%</div>
<div class="line">led_ntsc_driver.cpp                           34      34   100%</div>
<div class="line">w_wave_driver.cpp                             44      44   100%</div>
<div class="line">------------------------------------------------------------------------------</div>
<div class="line">TOTAL                                        115     115   100%</div>
<div class="line">------------------------------------------------------------------------------</div>
<div class="line">lines: 100.0% (115 out of 115)</div>
<div class="line">branches: 100.0% (134 out of 134)</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><em><b>NOTE:</b> If you are uncomfortable using Docker, then you may wish to use the Dockerfile as a guide to install the necessary dependencies and execute <code>./run_all_tests.sh</code> locally.</em> </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md6"></a>
Credits</h1>
<p>This library builds the research done by <code>x87bliss</code> along with those on the <a href="https://atariage.com/forums/topic/177286-any-interest-in-nes-rob-homebrews/">Atari Age Forums</a>, as well as <a href="https://learn.adafruit.com/controlling-a-classic-nintendo-r-o-b-robot-using-circuit-playground-express/overview">Anne Barela's guide</a> at Adafruit. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
